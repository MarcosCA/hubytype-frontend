<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="/hubtype-search.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <meta charset="UTF-8">
    <title>HubType Search</title>
</head>

<body>
    <div class="container">
        <img src="https://hubtype.com/images/hubtype-white-small3x.png" alt="Hubtype">            
        <input class="search-box" type="text" placeholder="Text to search"/>
        <input class="search-button" type="button" value="Search"> 
    </div>
</body>

<script>
    function search(queryString, callback){
        $.ajax({
        url: "https://jovial-yonath-d8166f.netlify.com/.netlify/functions/google_api",
        data: {
            q: queryString
        },
        async: false,
        dataType: "json",
        crossDomain: true,
        error: function(err){
            console.log(err);
            callback(err, null);
        },
        success: function(data) {
            callback(false, data);
        }
    });
    }

    $( ".search-button" ).click(function() {
        if ($(".search-box").val() !== ""){
            search($(".search-box").val(), function(err, data){
                if(data !== ''){
                    console.log(err);
                    console.log(data);
                    window.location = data.link;
                } else{
                    alert('no results found');
                }
            });
        }
    });
</script>

</html>